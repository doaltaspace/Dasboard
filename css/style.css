/* Palet warna monokrom yang elegan */
:root {
    --background: 0 0% 100%; /* White */
    --foreground: 240 10% 3.9%; /* Near Black */
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --primary: 18 65% 55%;                /* <-- (Earthen Terracotta) */
    --primary-foreground: 0 0% 98%;      /* Near White */
    --secondary: 240 4.8% 95.9%;         /* Light Gray */
    --secondary-foreground: 240 5.9% 10%;
    --border: 240 5.9% 90%;
    --ring: 240 5.9% 10%;
    --text-muted: 240 5% 38%;        /* Adjusted darker for better contrast */
    /* New surface tokens */
    --surface-alt: 240 6% 97%;
    --surface-warm: 18 55% 96%;
    --surface-accent: 18 40% 92%;
    --divider-soft: 240 8% 30%;
    --noise-alpha: 0.05;
}

:root.dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 5.9% 10%;
    --card-foreground: 0 0% 98%;
    --primary: 18 65% 55%;                /* <-- (Earthen Terracotta) */
    --primary-foreground: 0 0% 98%;      /* Teks Putih agar kontras di atas Terracotta */
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --ring: 0 0% 98%;
    --text-muted: 240 5% 64.9%;
    --surface-alt: 240 5% 14%;
    --surface-warm: 20 20% 16%;
    --surface-accent: 18 25% 22%;
    --divider-soft: 0 0% 60%;
    --noise-alpha: 0.04;
}

/* Kustomisasi Tipografi untuk Judul */
:root {
    --font-heading: 'Lato', serif;
    /* Unified type scale */
    --fs-hero: clamp(2.5rem,4.6vw,3.3rem);
    --fs-h2: clamp(1.9rem,3.2vw,2.35rem);
    --fs-h3: 1.05rem; /* card / minor heading */
    --fs-body: 0.97rem;
    --fs-body-sm: 0.85rem;
    --lh-tight: 1.15;
    --lh-snug: 1.3;
    --lh-body: 1.55;
}

h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    font-weight: 700;
}

/* === Global Typography Normalization === */
main p, main li { font-size: var(--fs-body); line-height: var(--lh-body); }
main small, main .text-xs { font-size: var(--fs-body-sm); }
main h2 { font-size: var(--fs-h2) !important; line-height: var(--lh-tight); letter-spacing: -0.5px; }
main h3 { font-size: var(--fs-h3); line-height: var(--lh-snug); }
/* Hero overrides */
#hero h1.hero-title { font-size: var(--fs-hero); line-height: 1.08; letter-spacing: -1px; }
#hero p { font-size: clamp(.95rem,1.1vw,1.05rem); }
@media (max-width:640px){
    #hero h1.hero-title { letter-spacing: -0.5px; }
    main p, main li { font-size: 0.95rem; }
}
/* Card heading consistency */
#career .experience-card h3,
#workflow .experience-card h3.workflow-title,
#projects .card-3d h3,
#skills .card-3d h3,
#education .card-3d h3 { font-size: var(--fs-h3) !important; letter-spacing: -.2px; }
/* Sub text muted unify */
.company, .date, #projects .card-3d p.text-sm, #education .card-3d .text-xs { font-size: var(--fs-body-sm); line-height: 1.4; }
#projects .card-3d p.text-sm { line-height: 1.45; }
/* Ensure workflow subtitle smaller body scale already set */
#workflow .workflow-subtitle { font-size: clamp(.92rem,1.05vw,1rem); }
/* Accessibility: preserve sufficient contrast & avoid scaling conflicts */
@media (prefers-reduced-motion: reduce){ #hero h1.hero-title { letter-spacing: -0.75px; } }

body, .bg-background, .bg-card, .text-foreground, .border-border, .text-primary, .bg-primary, #modal-content, header, #back-to-top-btn {
    transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out, border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out, opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}

/* Screen reader only utility */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* Skip link */
.skip-link { position: absolute; left: -999px; top: 0; background: hsl(var(--primary)); color: hsl(var(--primary-foreground)); padding: 0.75rem 1rem; z-index: 10000; border-radius: 0 0 6px 6px; font-weight: 600; }
.skip-link:focus { left: 1rem; outline: 3px solid hsl(var(--primary)); }

body {
    font-family: 'Inter', sans-serif;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    /* Hindari rubber-banding memicu pergeseran header di iOS/macOS */
    overscroll-behavior-y: none;
    /* Ruang untuk header fixed (h-16 => 64px) */
    padding-top: 64px;
}

/* === Consistent Section Spacing Audit === */
main > section { position: relative; }
/* Ensure top/bottom padding uniform; already py-24 (6rem). We create internal heading rhythm */
main > section > h2, #workflow .workflow-heading { margin-top: 0; }
/* Standard heading -> content gap */
main > section > h2 + *:not(script) { margin-top: 2.75rem; }
/* Fine tune specific sections already having internal wrappers */
#hero { padding-bottom: 3rem; }
#about .grid { margin-top: 2.5rem; }
#career #career-grid { margin-top: 3rem !important; }
#projects #projects-grid { margin-top: 3rem !important; }
#skills #skills-grid { margin-top: 3rem !important; }
#education #education-grid { margin-top: 3rem !important; }
#workflow .workflow-subtitle { margin-top: 1rem; }
#workflow .frame { margin-top: -2rem !important; }
@media (max-width: 768px){
    main > section > h2 + *:not(script) { margin-top: 2.25rem; }
                            #workflow .frame { margin-top: -1.8rem !important; }
    #career #career-grid, #projects #projects-grid, #skills #skills-grid, #education #education-grid { margin-top: 2.5rem !important; }
}
/* Prevent accidental crowding if custom mt-* utilities remain */
#career #career-grid[class*="mt-"], #projects #projects-grid[class*="mt-"], #skills #skills-grid[class*="mt-"], #education #education-grid[class*="mt-"] { margin-top: 3rem !important; }
@media (max-width:768px){
    #career #career-grid[class*="mt-"], #projects #projects-grid[class*="mt-"], #skills #skills-grid[class*="mt-"], #education #education-grid[class*="mt-"] { margin-top: 2.5rem !important; }
}

#interactive-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
}

#cursor-spotlight {
    position: fixed;
    width: 250px;
    height: 250px;
    border-radius: 50%;
    background: radial-gradient(circle, hsla(0, 0%, 0%, 0.05) 0%, transparent 60%);
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 9999;
    transition: opacity 0.5s ease-in-out, transform 0.2s ease-out;
    opacity: 0;
}

body:hover #cursor-spotlight {
    opacity: 1;
}

:root.dark #cursor-spotlight {
     background: radial-gradient(circle, hsla(0, 0%, 100%, 0.06) 0%, transparent 60%);
}

/* Dim spotlight when over hero */
#cursor-spotlight.dim {
    opacity: 0.35 !important;
}

/* On small screens, reduce spotlight visibility further */
@media (max-width: 640px) {
    #cursor-spotlight { display: none !important; }
}

@keyframes spotlight-pulse {
    0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
    50% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0.8;
    }
    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
}

#cursor-spotlight.pulse {
    animation: spotlight-pulse 0.4s ease-out;
}


.card-3d {
    transform-style: preserve-3d;
    transition: transform 0.4s ease-out, box-shadow 0.4s ease-out;
    position: relative;
    overflow: hidden;
}
.group:hover .card-3d {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 20px 40px hsla(var(--foreground), 0.1);
}
.card-3d::before {
    content: "";
    position: absolute;
    left: var(--x, 50%);
    top: var(--y, 50%);
    width: 200%;
    padding-bottom: 200%;
    transform: translate(-50%, -50%);
    background: radial-gradient(circle at center, hsla(var(--primary), 0.08) 0%, transparent 40%);
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.5s ease-out;
    pointer-events: none;
}
.card-3d:hover::before {
    opacity: 1;
}
.fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
.fade-in-up.visible {
    opacity: 1;
    transform: translateY(0);
}

.nav-link {
    position: relative;
    transition: color 0.3s ease, transform 0.3s ease;
}
.nav-link:hover {
    color: hsl(var(--primary));
    transform: translateY(-2px);
}
.nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px;
    left: 50%;
    background-color: hsl(var(--primary));
    transition: width 0.3s ease, left 0.3s ease;
}
.nav-link:hover::after, .nav-link.active::after {
    width: 100%;
    left: 0;
}

.btn {
    transition: all 0.3s ease-in-out;
}
.btn:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px hsla(var(--foreground), 0.1);
}
.btn:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 3px;
}
.btn:active {
    transform: scale(0.98);
}
#modal-overlay {
    transition: opacity 0.3s ease-in-out;
}
#modal-content {
    background-color: hsl(var(--card));
    color: hsl(var(--card-foreground));
    transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, background-color 0.3s ease-in-out, color 0.3s ease-in-out;
}
#modal-content.modal-workflow { max-width: 1200px !important; width: 100%; }
@media (min-width: 1536px){ #modal-content.modal-workflow { max-width: 1400px !important; } }
@media (max-width: 820px){ #modal-content.modal-workflow { max-width: 100% !important; } }
.modal-detail-item {
    opacity: 0;
    transform: translateX(-15px);
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}
.modal-detail-item.visible {
    opacity: 1;
    transform: translateX(0);
}
.lang-switcher {
    position: relative;
}
.lang-switcher button {
    position: relative;
    z-index: 10;
    transition: color 0.4s ease-out;
}
.lang-switcher .glider {
    position: absolute;
    top: 2px;
    bottom: 2px;
    background-color: hsl(var(--background));
    border-radius: 9999px;
    box-shadow: 0 1px 3px hsla(var(--foreground), 0.1);
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    z-index: 5;
}
.lang-switcher button.active {
    color: hsl(var(--foreground));
    font-weight: 600;
}
.skill-bar-container {
    background-color: hsl(var(--secondary));
    border-radius: 9999px;
    overflow: hidden;
    width: 100%;
    height: 8px;
}
.skill-bar-fill {
    background-color: hsl(var(--primary));
    height: 100%;
    width: 0;
    border-radius: 9999px;
    transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1);
}

@keyframes slide-down {
    from { transform: translateY(-100%); }
    to { transform: translateY(0); }
}

header {
    animation: slide-down 0.6s ease-out;
}
header.scrolled {
    box-shadow: 0 2px 10px hsla(var(--foreground), 0.05);
    border-color: transparent;
}
/* Center nav link group between brand and right controls */
nav .nav-center { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); }
@media (max-width: 767px){ nav .nav-center { position:static; transform:none; } }

/* Reduce backdrop blur intensity on small screens for perf */
header { backdrop-filter: blur(8px); }
@media (min-width: 640px) { header { backdrop-filter: blur(12px); } }

/* Horizontal metrics scroll on mobile */
.metrics-scroll {
    display: grid;
    grid-template-columns: repeat(4,minmax(160px,1fr));
}
@media (max-width: 640px) {
    .metrics-scroll {
        display: flex;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    touch-action: pan-x;
        scroll-snap-type: x mandatory;
        padding-bottom: 0.5rem;
        scrollbar-width: thin;
        gap: 1rem;
    mask-image: linear-gradient(to right, transparent 0, black 24px, black calc(100% - 24px), transparent 100%);
    }
    .metrics-scroll > div {
        min-width: 70%;
        flex: 0 0 auto;
        scroll-snap-align: center;
    }
}

#back-to-top-btn {
    opacity: 0;
    transform: translateY(100px);
    pointer-events: none;
}
#back-to-top-btn.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}
#back-to-top-btn:hover {
    transform: scale(1.1);
    background-color: hsl(var(--primary));
}
#back-to-top-btn:hover svg {
    color: hsl(var(--primary-foreground));
}

/* Safe area offset for floating buttons on devices with home indicator */
.fixed-bottom-safe { bottom: calc(1rem + env(safe-area-inset-bottom)); }

/* Pastikan target anchor tidak tertutup header fixed */
section[id] {
    scroll-margin-top: 80px; /* sedikit lebih besar dari tinggi header */
}

.animated-dot {
    display: block;
    width: 6px;
    height: 6px;
    border-radius: 9999px;
    background-color: hsl(var(--text-muted));
    transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
}
.stagger-item:hover .animated-dot,
.modal-detail-item:hover .animated-dot {
    transform: scale(1.5);
    background-color: hsl(var(--primary));
    box-shadow: 0 0 8px hsla(var(--primary), 0.5);
}

/* Styling untuk Tombol Kontak & AI Assistant */
#ai-fab-btn {
     transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
}
#ai-fab-btn.fade-out {
    opacity: 0;
    transform: scale(0.9);
    pointer-events: none;
}
.fab-options {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    gap: 0.75rem; /* 12px */
    margin-bottom: 0.75rem; /* 12px */
    pointer-events: none;
}
.fab-option {
    opacity: 0;
    transform: translateY(20px) scale(0.8);
    transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
}
.fab-container.active .fab-options {
    pointer-events: auto;
}
.fab-container.active .fab-option {
    opacity: 1;
    transform: translateY(0) scale(1);
}
.fab-container.active .fab-option:nth-child(1) { /* WhatsApp button */
    transition-delay: 0.2s;
}
.fab-container.active .fab-option:nth-child(2) { /* Email button */
    transition-delay: 0.3s;
}
.fab-main-button {
     transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1), box-shadow 0.3s ease-in-out;
}
.fab-container.active .fab-main-button {
    box-shadow: 0 0 20px hsla(var(--primary), 0.4);
}
.fab-option:hover {
    transform: scale(1.15) !important;
}

.fab-main-button .icon-closed {
    opacity: 1;
    transform: rotateY(0deg) scale(1);
    transition: all 0.5s ease-in-out;
}
.fab-main-button .icon-open {
    opacity: 0;
    transform: rotateY(90deg) scale(0.8);
    transition: all 0.5s ease-in-out;
}
.fab-container.active .fab-main-button .icon-closed {
    opacity: 0;
    transform: rotateY(-90deg) scale(0.8);
}
.fab-container.active .fab-main-button .icon-open {
    opacity: 1;
    transform: rotateY(0deg) scale(1);
}

/* Efek Bounce */
@keyframes bounce {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(0.9);
    }
}
.bouncing {
    animation: bounce 0.4s ease-in-out;
}

.text-muted { color: hsl(var(--text-muted)); }
.bg-background { background-color: hsl(var(--background)); }
.bg-card { background-color: hsl(var(--card)); }
.bg-primary { background-color: hsl(var(--primary)); }
.text-primary-foreground { color: hsl(var(--primary-foreground)); }
.bg-secondary { background-color: hsl(var(--secondary)); }
.text-secondary-foreground { color: hsl(var(--secondary-foreground)); }
.border-border { border-color: hsl(var(--border)); }
.text-primary { color: hsl(var(--primary)); }

/* Kustomisasi Warna Teks untuk Kartu Skill */

/* 1. Aturan untuk Light Mode (Default) */
#skills .card-3d h3 {
    color: hsl(18, 65%, 25%) !important; /* Warna Terracotta Versi Gelap */
}

/* 2. Aturan Khusus untuk Dark Mode */
.dark #skills .card-3d h3 {
    color: hsl(18, 25%, 80%) !important; /* Warna Beige Hangat kita yang semula */
}

/* Kustomisasi Gradasi Monokrom untuk Judul Utama (Versi Final - Soft) */
.hero-title {
  color: transparent;
  -webkit-background-clip: text;
  background-clip: text;
  
  /* Gradasi untuk Light Mode (Versi Soft) */
  background-image: linear-gradient(to bottom right, 
    hsl(240, 5%, 30%),      /* Dari: Abu-abu Tua yang lebih lembut */
    hsl(240, 3.8%, 55%)   /* Ke: Abu-abu Medium yang sedikit lebih terang */
  );
}

/* Fallback solid color for gradient heading for older browsers */
.hero-title { color: hsl(240 5% 30%); }
.dark .hero-title { color: hsl(var(--foreground)); }

/* Card click affordance */
.card-3d-container[role="button"] .card-3d::after {
    content: "";
    position: absolute;
    inset: 0;
    border: 2px solid transparent;
    border-radius: inherit;
    transition: border-color 0.3s ease;
    pointer-events: none;
}
.card-3d-container[role="button"]:focus-visible .card-3d::after {
    border-color: hsl(var(--primary));
}
.card-3d-container[role="button"] .card-3d .affordance-label {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: hsla(var(--background),0.7);
    backdrop-filter: blur(4px);
    font-size: 10px;
    letter-spacing: 0.5px;
    background: linear-gradient(
        to bottom,
        hsla(var(--background), 0.75),
        hsla(var(--background), 0.45)
    );
    backdrop-filter: blur(2px);
}

/* Reduced Motion Preference */
@media (prefers-reduced-motion: reduce) {
    * { animation: none !important; transition: none !important; }
    .card-3d, .group:hover .card-3d { transform: none !important; }
    #cursor-spotlight { display: none !important; }
}

/* ==== Workflow Layout Styles (restored absolute positioning) ==== */
#workflow .workflow-header { max-width: 860px; margin: 0 auto 1.25rem; text-align: center; padding: 0 1rem; }
#workflow .workflow-heading { font-size: clamp(1.9rem,3.4vw,2.4rem); font-weight:700; letter-spacing:-0.5px; line-height:1.15; margin:0; font-family: var(--font-heading,'Lato','Inter',sans-serif); }
#workflow .workflow-subtitle { margin: 0.85rem auto 0; max-width: 780px; font-size: clamp(.9rem,1.15vw,1rem); line-height:1.55; color: hsl(var(--text-muted)); }
#workflow .workflow-subtitle br { display:none; }
@media (max-width:640px){
    #workflow .workflow-header { margin-bottom: .75rem; }
    #workflow .workflow-heading { font-size: clamp(1.75rem,5.8vw,2.15rem); }
    #workflow .workflow-subtitle { font-size: .9rem; line-height:1.5; padding:0 .25rem; }
}
html[lang="id"] #workflow .workflow-heading { letter-spacing:-0.25px; }
#workflow {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 48px;
    padding: 0 0 96px;
    position: relative;
    /* Extra top separation from Projects section (increased again) */
    margin-top: 3.25rem;
}
#workflow .heading {
    display: flex;
    flex-direction: column;
    height: 36px;
    align-items: center;
    justify-content: space-around;
    position: relative;
    align-self: stretch;
    width: 100%;
}
#workflow .text-wrapper {
    position: relative;
    align-self: stretch;
    margin-top: -1px;
    font-family: var(--font-heading, 'Lato', 'Inter', sans-serif);
    font-weight: 700;
    color: hsl(var(--foreground));
    font-size: clamp(1.75rem, 3.2vw, 2.25rem);
    text-align: center;
    letter-spacing: 0;
    line-height: 1.15;
}
/* Expanded width from 555px to 590px after additional right shift */
#workflow .frame { position: relative; width: 590px; height: 535px; }
/* Workflow cards resized from 132px to 110px height */
#workflow .card, #workflow .card-2, #workflow .card-3 { position: absolute; width: 450px; height: 110px; }
#workflow .card { top: 0; left: -30px; }
#workflow .card-3 { top: 115px; left: 110px; width: 450px; }
#workflow .card-2 { top: 230px; left: -30px; }
#workflow .group, #workflow .img { position: absolute; width: 110px; height: 74px; top: 42px; overflow: visible; }
/* Slight additional right shift for connectors */
/* === LOCKED WORKFLOW CONNECTOR POSITIONS (Card 2 +5px right tweak) === */
#workflow .group { left: 425px; right:auto; } /* Card 1 connector */
#workflow .img { left: -30px; } /* Card 2 flipped connector */
#workflow .overlap-group, #workflow .overlap, #workflow .research-analysis-wrapper {
    position: absolute;
    width: 335px;
    height: 110px; /* adjusted from 124px */
    top: 0;
    left: 0;
    background-color: transparent;
    border-radius: 45px;
    border: none;
    box-shadow: none;
}
#workflow .overlap { left:116px; }
/* Card 4 shifted further right in sync with card 3 (+18px) */
#workflow .research-analysis-wrapper { top:345px; left:226px; width:335px; height:110px; transform:none; }
#workflow .span { color: hsl(var(--primary)); }
#workflow .text-wrapper-2 { color: hsl(var(--foreground)); }
:root.dark #workflow .overlap-group,
:root.dark #workflow .research-analysis-wrapper,
:root.dark #workflow .overlap { box-shadow: none; }
:root.dark #workflow .text-wrapper { color: hsl(var(--foreground)); }
#workflow .workflow-card {
    border-radius: 45px;
    position: absolute;
    z-index: 2;
    /* Pseudo-element akan membuat shadow 3D utama */
}
#workflow .workflow-card::after {
    content: "";
    position: absolute;
    left: 26px; right: 26px; bottom: -24px;
    height: 48px;
    pointer-events: none;
    background:
        radial-gradient(ellipse at center,
            hsla(var(--foreground),0.28) 0%,
            hsla(var(--foreground),0.24) 35%,
            hsla(var(--foreground),0.18) 55%,
            transparent 72%);
    filter: blur(18px) saturate(110%);
    opacity: 0.92;
    transform: scale(1, 0.85);
    transition: opacity .55s ease, transform .7s cubic-bezier(.19,1,.22,1);
    border-radius: 50%;
}
#workflow .workflow-card:hover::after,
#workflow .workflow-card:focus-visible::after {
    opacity: 1;
    transform: scale(1.08, 0.95) translateY(2px);
}
:root.dark #workflow .workflow-card::after {
    background:
        radial-gradient(ellipse at center,
            hsla(var(--foreground),0.55) 0%,
            hsla(var(--foreground),0.50) 38%,
            hsla(var(--foreground),0.42) 60%,
            transparent 78%);
    filter: blur(20px) saturate(120%);
    opacity: 0.95;
}
:root.dark #workflow .workflow-card:hover::after,
:root.dark #workflow .workflow-card:focus-visible::after {
    transform: scale(1.1, 0.98) translateY(3px);
}
#workflow .flip-x { transform: scaleX(-1); }
#workflow .overlap-group.workflow-card,
#workflow .overlap.workflow-card,
#workflow .research-analysis-wrapper.workflow-card { perspective:1000px; }
#workflow .experience-card { position:relative; background:hsl(var(--card)); border:1px solid hsl(var(--border)); border-radius:45px; padding:32px 40px; transition:box-shadow .45s ease-out, transform .45s ease-out; }
#workflow .card-3d-container.group:hover .experience-card { box-shadow:0 20px 40px -10px hsla(var(--foreground),0.22),0 8px 24px -6px hsla(var(--foreground),0.16); }
#workflow .experience-card h3.workflow-title { font-size:16px; line-height:1.5; color:hsl(var(--primary)); margin:0 0 2px; font-weight:700; }
#workflow .experience-card .date { font-size:12px; line-height:1.33; color:hsl(var(--text-muted)); margin-bottom:4px; }
#workflow .experience-card .company { font-size:14px; line-height:1.4; color:hsl(var(--text-muted)); margin:0 0 6px; }
#workflow .arrow-link { position:absolute; top:50%; transform:translateY(-50%); right:28px; width:40px; height:40px; background:hsl(var(--secondary)); border-radius:50%; display:flex; align-items:center; justify-content:center; transition:background .3s ease, transform .3s ease; }
#workflow .experience-card:hover .arrow-link { background:hsl(var(--primary)); }
#workflow .arrow-link svg { width:20px; height:20px; color:hsl(var(--foreground)); transition:color .3s ease, transform .3s ease; }
#workflow .experience-card:hover .arrow-link svg { color:hsl(var(--primary-foreground)); }
#workflow .research-analysis { position: relative; width: 420px; height: 44px; top:32px; left:28px; transform:none; }
#workflow .div { position:absolute; width:420px; top:-1px; left:0; letter-spacing:0; }
#workflow .span { display:block; font-family: var(--font-heading, 'Lato', 'Inter', sans-serif); font-weight:700; font-size:16px; line-height:1.45; margin-bottom:2px; }
#workflow .text-wrapper-2 { display:block; font-family:'Inter', sans-serif; font-weight:400; font-size:14px; line-height:1.5; color:hsl(var(--text-muted)); }
@media (max-width:900px){ #workflow .frame { transform:scale(.95); transform-origin:top center; } }
@media (max-width:780px){ #workflow .frame { transform:scale(.9); } }
@media (max-width:700px){ #workflow .frame { transform:scale(.85); } }
@media (max-width:640px){ #workflow .frame { transform:scale(.8); } }
@media (max-width:560px){ #workflow .frame { transform:scale(.72); } }
@media (max-width:480px){ #workflow .frame { transform:scale(.65); } }
@media (max-width:420px){ #workflow .frame { transform:scale(.58); } }
#workflow-mobile-list { display:none; }
@media (max-width: 768px){
    /* Hide complex absolute layout on narrow screens & show stacked */
    #workflow .frame { display:none !important; }
    #workflow-mobile-list { display:block; }
    #workflow-mobile-list .wf-item { border:1px solid hsl(var(--border)); background:hsl(var(--card)); border-radius:28px; padding:20px 22px; position:relative; }
    #workflow-mobile-list .wf-item h3 { font-size:1rem; margin:0 0 4px; font-weight:700; color:hsl(var(--primary)); letter-spacing:-0.25px; }
    #workflow-mobile-list .wf-item p { font-size:.82rem; line-height:1.45; color:hsl(var(--text-muted)); margin:0 0 10px; }
    #workflow-mobile-list .wf-bullets { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:6px; }
    #workflow-mobile-list .wf-bullets li { display:flex; align-items:flex-start; gap:10px; font-size:.78rem; line-height:1.4; color:hsl(var(--foreground)); }
    #workflow-mobile-list .wf-bullets li .dot { width:6px; height:6px; border-radius:50%; background:hsl(var(--primary)); margin-top:6px; flex-shrink:0; }
}
#workflow { overflow:hidden; }
html[lang="id"] #workflow .frame { margin-top: 0.75rem; }
#workflow .workflow-connector { color: hsl(var(--primary)); opacity:0.9; }
:root.dark #workflow .workflow-connector { color: hsl(var(--primary)); opacity:0.95; }
/* Animated dashed flow for workflow connectors */
#workflow .workflow-connector path:first-of-type {
    stroke-dasharray: 11 11;
    stroke-dashoffset: 0;
    animation: wf-dash 5s linear infinite;
}
/* Endpoint availability pulse (refined: static core + expanding ring) */
#workflow .workflow-connector .wf-core {
    fill: hsl(var(--primary));
    stroke: hsl(var(--background));
    stroke-width: 3;
    transform-box: fill-box;
    transform-origin: center;
    animation: wf-core-soft 2.8s ease-in-out infinite;
}
#workflow .workflow-connector .wf-ring {
    fill: none;
    stroke: hsl(var(--primary));
    stroke-width: 2;
    opacity: 0.55;
    animation: wf-ring 2.8s ease-out infinite;
    transform-origin: center;
    transform-box: fill-box; /* ensure scale from its own center */
}
@keyframes wf-ring { 0% { transform: scale(.5); opacity:.6;} 65% {opacity:0;} 100% { transform: scale(2.2); opacity:0; } }
@keyframes wf-core-soft { 0%,100% { transform: scale(1);} 50% { transform: scale(1.12);} }
@media (prefers-reduced-motion: reduce){ #workflow .workflow-connector .wf-ring, #workflow .workflow-connector .wf-core { animation:none !important; } }
@keyframes wf-dash { to { stroke-dashoffset: -44; } }
@media (prefers-reduced-motion: reduce) { #workflow .workflow-connector path:first-of-type { animation: none !important; } }
/* ==== End Workflow Layout Styles ==== */

/* ===== Career Timeline (new design) ===== */
#career .timeline-container { position:relative; max-width:982px; margin-left:auto; margin-right:auto; height:702px; }
#career .timeline-container::before { display:none; }
#career .timeline-graphic { position:absolute; top:4px; left:50%; transform:translateX(-50%); height:100%; width:auto; pointer-events:none; }
#career .timeline-item { position:absolute; width:517px; }
#career .timeline-item.right { right:0; }
#career .timeline-item.left { left:0; }
#career .timeline-item .experience-card { position:relative; background:hsl(var(--card)); border:1px solid hsl(var(--border)); border-radius:45px; padding:32px 40px; transition:box-shadow .45s ease-out, transform .45s ease-out; }
#career .timeline-item .card-3d-container.group:hover .experience-card { box-shadow:0 20px 40px -10px hsla(var(--foreground),0.22),0 8px 24px -6px hsla(var(--foreground),0.16); }
#career .experience-card h3 { font-size:16px; line-height:1.5; color:hsl(var(--primary)); margin:0 0 2px; font-weight:700; }
#career .experience-card .date { font-size:12px; line-height:1.33; color:hsl(var(--text-muted)); margin-bottom:4px; }
#career .experience-card .company { font-size:14px; line-height:1.4; color:hsl(var(--text-muted)); margin:0 0 6px; }
#career .experience-card .industry-mobile { font-size:12px; line-height:1.35; margin:-2px 0 6px 0; color:hsl(var(--text-muted)); }
#career .experience-card .summary { display:none; }
#career .arrow-link { position:absolute; top:50%; transform:translateY(-50%); right:28px; width:40px; height:40px; background:hsl(var(--secondary)); border-radius:50%; display:flex; align-items:center; justify-content:center; transition:background .3s ease, transform .3s ease; }
#career .experience-card:hover .arrow-link { background:hsl(var(--primary)); }
#career .experience-card:hover .arrow-link svg { color:hsl(var(--primary-foreground)); }
#career .arrow-link svg { width:20px; height:20px; color:hsl(var(--foreground)); transition:color .3s ease, transform .3s ease; }
#career .experience-card:hover .arrow-link svg { transform:none; }
/* positioning items (fixed heights assumption) */
#career .timeline-item.item-1 { top:38px; }
#career .timeline-item.item-2 { top:205px; }
#career .timeline-item.item-3 { top:373px; }
#career .timeline-item.item-4 { top:542px; }
/* Fallback for >4 items: stack below */
#career .timeline-item.item-5 { top:718px; }
/* Responsive: collapse timeline */
@media (max-width:1024px){
    #career .timeline-container { height:auto; display:flex; flex-direction:column; gap:32px; }
    #career .timeline-container::before { display:none; }
    #career .timeline-item { position:static; width:100%; }
}
@media (max-width:640px){
    #career .experience-card { border-radius:30px; padding:28px 32px; }
}
/* Dark mode adjustments */
:root.dark #career .timeline-container::before { background:linear-gradient(to bottom, hsla(var(--primary),0.35), hsla(var(--primary),0.65)); }

/* ================= SVG Timeline Animation ================= */
.timeline-graphic { overflow: visible; }
.timeline-graphic [id='Vector 2'] { /* dashed path movement */
    stroke-dashoffset: 0;
    animation: timeline-dash-move 6s linear infinite;
    will-change: stroke-dashoffset;
}
@keyframes timeline-dash-move { to { stroke-dashoffset: -44; } }
@media (prefers-reduced-motion: reduce) {
    .timeline-graphic [id='Vector 2'] { animation: none !important; }
}
:root.dark #career .arrow-link { background:hsl(var(--secondary)); }
:root.dark #career .arrow-link svg { color:hsla(var(--foreground),0.65); }
:root.dark #career .experience-card:hover .arrow-link svg { color:#D66F42; }
/* Also apply terracotta on keyboard focus for accessibility */
:root.dark #career .card-3d-container:focus-visible .experience-card .arrow-link svg { color:#D66F42; }
/* ================= Global Card Radius Harmonization ================= */
.card, .card-3d, .card-3d-container .card-3d, .experience-card, #modal-content, #ai-modal-content {
    border-radius:45px !important;
}
/* Keep small metric cards slightly tighter */
#hero .metrics-scroll > div { border-radius:32px !important; }
@media (max-width:640px){
    #hero .metrics-scroll > div { border-radius:28px !important; }
}
/* Skills section uses a medium radius (25px) for visual hierarchy */
#skills .card,
#skills .card-3d,
#skills .card-3d-container .card-3d { border-radius:25px !important; }

/* Modal career accordion */
.accordion-list { list-style:none; margin:0; padding:0; }
.accordion-item { padding:6px 0 4px; position:relative; }
.accordion-item + .accordion-item { margin-top:4px; }
.accordion-trigger { all:unset; cursor:pointer; display:flex; align-items:flex-start; gap:8px; width:100%; padding:4px 2px; border-radius:4px; }
.accordion-trigger:focus-visible { outline:2px solid hsl(var(--primary)); outline-offset:2px; }
.accordion-trigger:hover .label { color:hsl(var(--primary)); }
.accordion-trigger .bullet { width:6px; height:6px; border-radius:50%; background:hsl(var(--primary)); margin-top:7px; flex-shrink:0; transition:background .3s ease; }
.accordion-trigger .label { flex:1; font-size:.82rem; line-height:1.4; color:hsl(var(--foreground)); font-weight:400; letter-spacing:.15px; }
.accordion-item[open] .accordion-trigger .label { font-weight:600; }
.accordion-panel { font-size:.75rem; line-height:1.5; color:hsl(var(--text-muted)); margin:4px 0 0 14px; padding-left:10px; border-left:1px solid hsl(var(--border)); display:none; animation:fadeSlide .3s ease; }
.accordion-item[open] .accordion-panel { display:block; }
@keyframes fadeSlide { from { opacity:0; transform:translateY(-4px);} to { opacity:1; transform:translateY(0);} }
@media (prefers-reduced-motion: reduce){ .accordion-panel { animation:none; } }

/* =============================================================
    Research & Analysis Table STYLES (LOCKED BASELINE)
    Status: Approved final visual (light + dark)
    Guidance:
    - Reuse by applying class .research-table-wrapper + .research-table
    - Keep semantic: thead th (scope="col"), first column can be th.problem-cell (scope="row")
    - Hover behavior: single-cell text color only via .cell-hover class (JS handles)
    - Dark mode grid: pure white separators (hsla(0,0%,100%,0.85))
    - If extending (e.g., sortable columns), add new classes; DO NOT override core tokens below.
    - To clone style for another table: copy wrapper markup & keep classes; adjust column widths via colgroup.
    ============================================================= */
/* Research & Analysis (workflow step 1) modal table (restored advanced styling) */
.research-table-block { position:relative; }
.research-table-wrapper { border:1px solid hsl(var(--border)); border-radius:22px; background:linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--surface-alt)) 100%); box-shadow:0 4px 12px -4px hsla(var(--foreground),0.08), 0 12px 28px -10px hsla(var(--foreground),0.12); overflow:hidden; position:relative; }
.dark .research-table-wrapper { background:linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--surface-accent)) 100%); box-shadow:0 6px 18px -6px hsla(var(--foreground),0.55), 0 16px 34px -12px hsla(var(--foreground),0.4); }
.research-table { border-collapse: separate; border-spacing:0; width:100%; }
.research-table thead { clip-path: inset(0 0 0 0 round 22px 22px 0 0); }
.research-table thead th { position:sticky; top:0; text-align:center; background:hsl(var(--primary)); backdrop-filter:blur(4px); color:hsl(var(--primary-foreground)); font-weight:600; padding:14px 18px; font-size:.75rem; letter-spacing:.55px; text-transform:uppercase; border-bottom:3px solid hsl(var(--primary)); box-shadow:none; }
.research-table thead th:first-child { border-top-left-radius:22px; }
.research-table thead th:last-child { border-top-right-radius:22px; }
.research-table thead th + th { border-left:1px solid hsl(var(--border)); }
.research-table tbody th + td, .research-table tbody td + td { border-left:1px solid hsl(var(--border)); }
.dark .research-table thead th + th,
.dark .research-table tbody th + td,
.dark .research-table tbody td + td { border-color:hsla(0,0%,100%,0.85); }
@media (min-width: 900px){ .research-table thead th { font-size:.8rem; } }
.dark .research-table thead th { background:hsl(var(--primary)); color:hsl(var(--primary-foreground)); border-bottom:3px solid hsl(var(--primary-foreground)); box-shadow:none; }
.research-table thead tr { position:relative; }
/* Removed previous gradient underline; solid bottom border now acts as separator */
.research-table tbody tr:first-child td { position:relative; }
/* Removed thin gradient line above first body row (header border now sufficient) */
.research-table tbody td, .research-table tbody th.problem-cell { padding:14px 18px; vertical-align:middle; border-bottom:1px solid hsl(var(--border)); font-size:.85rem; line-height:1.55; position:relative; text-align:center; color:hsl(var(--text-muted)); }
.research-table tbody td, .research-table tbody th.problem-cell { white-space:normal; overflow-wrap:break-word; word-break:break-word; hyphens:auto; }
/* Extension: enable wrapping so long text stays inside cell boundaries (non-destructive to locked baseline) */
.dark .research-table tbody td,
.dark .research-table tbody th.problem-cell { color:hsla(var(--primary-foreground),0.9); border-bottom:1px solid hsla(0,0%,100%,0.85); background:transparent; }
/* Keep last row border for clear closure */
.dark .research-table tbody tr:last-child td,
.dark .research-table tbody tr:last-child th.problem-cell { border-bottom:1px solid hsla(0,0%,100%,0.85); }
/* Ensure header stacking unchanged */
.dark .research-table thead th { position:sticky; z-index:3; }
/* Dark mode: remove bottom border on last row for clean end */
.dark .research-table tbody tr:last-child td,
.dark .research-table tbody tr:last-child th.problem-cell { border-bottom:1px solid hsla(var(--primary-foreground),0.18); }
/* Hover parity (slight warm tint without full gradient) */
.dark .research-table tbody tr:hover td,
.dark .research-table tbody tr:hover th.problem-cell { background:hsla(var(--primary),0.16); }
.research-table tbody tr:last-child td { border-bottom:none; }
.research-table tbody tr { transition: background .35s ease; }
.research-table tbody tr:hover { background:linear-gradient(90deg, hsla(var(--primary),0.08), hsla(var(--primary),0.04)); }
.dark .research-table tbody tr:hover { background:hsla(var(--primary),0.16); }
.research-table thead th:first-child, .research-table tbody th.problem-cell { width:26%; max-width:340px; word-wrap:break-word; white-space:normal; font-weight:500; color:hsl(var(--foreground)); }
/* Override: make first header (Problem) text white like others */
.research-table thead th:first-child { color:hsl(var(--primary-foreground)) !important; }
/* AI Tools column width restored */
.research-table thead th:nth-child(4), .research-table tbody td:nth-child(4),
.research-table .ai-col, .research-table td.ai-cell { width:13%; min-width:155px; }
.research-table thead th:nth-child(5), .research-table tbody td:nth-child(5), .research-table .result-col { width:24%; }
/* Extension: Objective column (now 2nd) */
.research-table thead th:nth-child(2),
.research-table tbody td:nth-child(2),
.research-table .objective-col { width:12%; max-width:170px; }
/* Extension: Key Tools / Methods column (now 3rd) */
.research-table thead th:nth-child(3),
.research-table tbody td:nth-child(3),
.research-table .tools-col { width:18%; max-width:230px; }
.research-table td.ai-cell { max-width:178px; white-space:normal; overflow:visible; text-overflow:unset; word-break:break-word; overflow-wrap:break-word; hyphens:auto; line-height:1.4; }
/* Improve wrapping inside AI tools list: allow comma separated tools to wrap neatly */
.research-table td.ai-cell { word-break:break-word; }
.research-table td.ai-cell span, .research-table td.ai-cell strong { word-break:inherit; }
.research-table td.ai-cell .ai-sub { display:block; font-size:.85em; line-height:1.2; opacity:1; font-weight:500; letter-spacing:.15px; white-space:nowrap; }
.research-table-wrapper { position:relative; }
.research-table tbody { transition: opacity .25s ease; }
.research-table-wrapper[data-hover-col] .research-table tbody tr td { transition: background-color .25s ease; }
/* Deprecated column highlight & row highlight styles intentionally removed */
/* Single-cell hover (terracotta accent) */
.research-table td.cell-hover, .research-table th.problem-cell.cell-hover {
    background: none !important; /* no cell box highlight */
    box-shadow: none !important;
    color: hsl(var(--primary)) !important; /* emphasize text color */
    text-decoration: none; /* could switch to underline if desired */
    transition: color .18s ease;
}
.dark .research-table td.cell-hover, .dark .research-table th.problem-cell.cell-hover {
    color: hsl(var(--primary)) !important;
}
@media (min-width:1100px){ .research-table td.ai-cell { max-width:210px; } }
/* Double vertical separator body (row header th) */
.research-table tbody th.problem-cell { position:relative; padding-left:28px; }
.research-table tbody th.problem-cell::before { content:""; position:absolute; left:8px; top:50%; transform:translateY(-50%); width:4px; height:60%; border-radius:2px; background:linear-gradient(to bottom, hsl(var(--primary)), hsl(var(--primary))/0.55); opacity:.65; }
.research-table tbody th.problem-cell::after { content:""; position:absolute; top:0; right:-1px; height:100%; width:4px; pointer-events:none; background:
 linear-gradient(to right, hsla(var(--primary),0.50), hsla(var(--primary),0.50)) 0 0/1px 100% no-repeat,
 linear-gradient(to right, hsla(var(--primary),0.16), hsla(var(--primary),0.16)) 3px 0/1px 100% no-repeat; }
.dark .research-table tbody th.problem-cell::after { background:
 linear-gradient(to right, hsla(0,0%,100%,0.95), hsla(0,0%,100%,0.95)) 0 0/1px 100% no-repeat,
 linear-gradient(to right, hsla(0,0%,100%,0.55), hsla(0,0%,100%,0.55)) 3px 0/1px 100% no-repeat; }
/* Header stronger double line */
.research-table thead th:first-child { position:relative; z-index:2; }
.research-table thead th:first-child::after { content:""; position:absolute; top:0; bottom:0; right:0; width:6px; pointer-events:none; background:
 linear-gradient(to right, hsla(var(--primary),0.70), hsla(var(--primary),0.70)) 0 0/2px 100% no-repeat,
 linear-gradient(to right, hsla(var(--primary),0.30), hsla(var(--primary),0.30)) 4px 0/2px 100% no-repeat; }
.dark .research-table thead th:first-child::after { background:
 linear-gradient(to right, hsla(0,0%,100%,0.95), hsla(0,0%,100%,0.95)) 0 0/2px 100% no-repeat,
 linear-gradient(to right, hsla(0,0%,100%,0.55), hsla(0,0%,100%,0.55)) 4px 0/2px 100% no-repeat; }
/* Simplify: remove double separator after first column -> keep single standard border via next column's border-left */
.research-table thead th:first-child::after,
.research-table tbody th.problem-cell::after { content:none !important; background:none !important; width:0 !important; }
/* Removed nowrap to allow AI Tools column (now 4th) to wrap text naturally */
.research-table tbody td:nth-child(2), .research-table tbody td:nth-child(5) { font-size:.85rem; line-height:1.55; }
.research-table caption { caption-side:top; padding:0 0 8px; font-size:.7rem; text-align:left; color:hsl(var(--text-muted)); }
.research-table-wrapper::-webkit-scrollbar { height:10px; }
.research-table-wrapper::-webkit-scrollbar-track { background:transparent; }
.research-table-wrapper::-webkit-scrollbar-thumb { background:hsla(var(--foreground),0.16); border-radius:20px; border:2px solid transparent; background-clip:content-box; }
.research-table-wrapper::-webkit-scrollbar-thumb:hover { background:hsla(var(--foreground),0.28); }
@media (max-width:640px){ .research-table { min-width:780px; } }


/* Performance: defer rendering below-the-fold sections using content-visibility (progressive enhancement) */
#about, #career, #projects, #workflow, #skills, #education {
    content-visibility: auto;
    contain-intrinsic-size: 900px; /* rough placeholder to prevent large layout shift */
}
@media (max-width: 640px){
    #about, #career, #projects, #workflow, #skills, #education { contain-intrinsic-size: 1100px; }
}
